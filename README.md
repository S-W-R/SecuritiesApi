# SecuritiesApi

Тестовое задание "Сервис ценных бумаг"

## Описание функциональности

- CRUD API операций по объектам
- Импорт объектов из файлов xml в приложение осуществляется через отправку содержимого соответсвующих .xml файлов по
  путям `/securities/v1/import/securities` и `/securities/v1/import/history`
- Реализован вывод сводных данных на основе объектов "Информация о ценных бумагах" и "История торгов за произвольную
  дату" на эндпоинтах `/securities/v1/summary/*`

## Запуск

Проект запускается локально на указанном в конфигурации хосте и порте.
Также нужно предварительно развернуть PostgreSQL и указать найстройки в конфигурации.
Файл конфигурации - `application.conf`

## Документация

В проекте для документации используется Swagger, воспользоваться им можно по пути `/docs/index.html`

## Описание архитектуры приложения:

Приложение написано на стеке Scala3+Cats+Http4s+Tapir+doobie. 

### configuration

Содержит модели конфигурации и логику для загрузки из `application.conf`

### datamodels

Содержит все модели запросов/ответов/сущностей которыми оперирует сервис

### infrastructure

Содержит разлчиные технические инструменты:

- db - работа с базой данных(создание Transactor, выполнение миграций)
- codecs - содержит кодеки для работы с xml

### repositories

Содержит репозитории для операций с базой данных

### routes

Содержит описание HTTP эндпоинтов на основе Tapir

### server

Содержит логику создания HTTP сервера на основе Http4s Ember

### services

Содержит сервисы выполняющие логику эндпоинтов

## ToDo

- [x] minimal api
- [x] OpenApi Docs/Swagger
- [ ] docker
- [ ] logs
- [ ] metrics
- [ ] DI
- [ ] client
- [ ] tests
